<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MindfulFeed | Analytics</title>
    <link rel="stylesheet" href="summary.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <img class="logo" src="../logo/logo-main.png" alt="MindfulFeed" />
        <div>
          <div class="name">MindfulFeed</div>
          <div class="sub">Report</div>
        </div>
      </div>

      <nav class="nav-menu">
        <button class="nav-btn" data-page="insights.html">üí° Insights</button>
        <button class="nav-btn" data-page="goals.html">üéØ Goals</button>
        <button class="nav-btn" data-page="stats.html">üèÜ Stats</button>
        <button class="nav-btn" data-page="achievements.html">üéñÔ∏è Achievements</button>
      </nav>

      <div class="actions">
        <button id="themeToggle" class="theme-toggle" title="Toggle Dark Mode">üåô</button>
        <button id="refreshBtn" class="btn">Refresh</button>
      </div>
    </header>

    <main class="container">
      <section class="gridTop">
        <article class="card">
          <div class="cardHeader">
            <h2>Today's Analytics</h2>
          </div>
          <div class="topicWrap">
            <div class="donut" id="topicDonut" aria-label="Topics donut chart"></div>
            <div class="legend" id="topicLegend"></div>
          </div>
        </article>

        <article class="card">
          <div class="cardHeader">
            <h2>Emotional Analytics</h2>
          </div>
          <div class="emoList" id="emoList"></div>
        </article>
      </section>

      <article class="card heatmapCard">
        <div class="cardHeader">
          <h2>Category √ó Emotion Heatmap</h2>
          <div class="heatmapSubtitle">Time spent per category and emotional tone</div>
        </div>
        <div class="heatmapWrapper">
          <div id="heatmapMatrix" class="heatmapContainer"></div>
          <div class="heatmapExplanation">
            <h3 class="explanationTitle">Understanding the Heatmap</h3>
            <div class="explanationSection">
              <h4 class="explanationSubtitle">What it shows</h4>
              <p class="explanationText">
                This heatmap visualizes how your time is distributed across different content categories and emotional tones. Each cell represents the intersection of a category (row) and emotion (column).
              </p>
            </div>
            <div class="explanationSection">
              <h4 class="explanationSubtitle">How to read it</h4>
              <ul class="explanationList">
                <li><strong>Rows:</strong> Content categories (Educational, Informative, Social, Entertainment)</li>
                <li><strong>Columns:</strong> Emotional tones detected (Heavy, Light, Neutral)</li>
                <li><strong>Cell color:</strong> Intensity indicates time spent‚Äîdarker colors mean more time</li>
                <li><strong>Cell values:</strong> Show exact time and percentage of total session</li>
              </ul>
            </div>
            <div class="explanationSection">
              <h4 class="explanationSubtitle">Interaction</h4>
              <p class="explanationText">
                Hover over any cell to see it expand and get detailed information about time spent in that category-emotion combination.
              </p>
            </div>
          </div>
        </div>
      </article>

      <article class="card">
        <div class="cardHeader row">
          <h2>Statistics chart</h2>
          <div class="periodTabs" id="periodTabs" aria-label="Statistics period">
            <button class="tab" data-period="day" type="button">Day</button>
            <button class="tab active" data-period="week" type="button">Week</button>
            <button class="tab" data-period="month" type="button">Month</button>
          </div>
          <div class="legendRow" id="statsLegend"></div>
        </div>
        <div class="stats" id="stats"></div>
      </article>

      <section class="gridBottom" id="gauges"></section>

      <div class="footnote" id="footnote"></div>

      <article class="card sessionsCard">
        <div class="cardHeader">
          <h2>Today's Sessions</h2>
        </div>
        <div id="todaySessions" class="sessionsList"></div>
      </article>

      <article class="card sessionsCard">
        <div class="cardHeader">
          <h2>Yesterday's Sessions</h2>
        </div>
        <div id="yesterdaySessions" class="sessionsList"></div>
      </article>
    </main>

    <details class="debug">
      <summary>üîç Debug: Last Session Analysis (Top 30 Posts with AI Categories)</summary>
      <p id="analysisMethodInfo" style="font-size: 0.875rem; color: #718096; margin: 0.5rem 0;">
        <strong>Analysis Method:</strong> <span id="analysisMethodText">Loading...</span>
      </p>
      <pre id="rawDump">No data yet.</pre>
    </details>

    <!-- Session Detail Modal -->
    <div class="sessionModal" id="sessionModal">
      <div class="modalContent">
        <div class="modalHeader">
          <div class="modalHeaderLeft">
            <h2 class="modalTitle" id="modalTitle">Session Details</h2>
            <div class="modalSubtitle" id="modalSubtitle"></div>
          </div>
          <button class="modalClose" id="modalClose" aria-label="Close modal">√ó</button>
        </div>
        <div class="modalBody">
          <div class="postsGrid" id="postsGrid"></div>
        </div>
      </div>
    </div>

    <script src="summary.js"></script>
  </body>
</html>
